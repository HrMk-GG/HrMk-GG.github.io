<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>極・オセロオンライン</title>
    <style>
        :root { --bg-color: #2c3e50; --board-color: #27ae60; }
        body { background-color: var(--bg-color); color: white; font-family: 'Hiragino Sans', sans-serif; text-align: center; margin: 0; }
        .hidden { display: none; }
        
        /* メニュー周り */
        .screen { padding: 20px; animation: fadeIn 0.5s; }
        button { background: #ecf0f1; border: none; padding: 10px 20px; margin: 10px; font-size: 18px; cursor: pointer; border-radius: 5px; transition: 0.2s; }
        button:hover { background: #bdc3c7; transform: scale(1.05); }
        input { padding: 10px; font-size: 18px; border-radius: 5px; border: none; width: 200px; text-align: center; }

        /* 盤面 */
        .board { display: grid; grid-template-columns: repeat(8, 50px); grid-template-rows: repeat(8, 50px); gap: 2px; background: #2c3e50; border: 5px solid #34495e; margin: 20px auto; width: 416px; }
        .cell { background: var(--board-color); display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .stone { width: 40px; height: 40px; border-radius: 50%; display: none; }
        .black { display: block; background: #000; box-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .white { display: block; background: #fff; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="nickname-screen" class="screen">
        <h1>⚪️ 極・オセロ ⚫️</h1>
        <p>ニックネームを決めてね (10文字以内)</p>
        <input type="text" id="nickname-input" maxlength="10" placeholder="なまえ">
        <br>
        <button onclick="goToMenu()">決定！</button>
    </div>

    <div id="menu-screen" class="screen hidden">
        <h2>ようこそ、<span id="display-name"></span> さん！</h2>
        <button onclick="startCPU()">CPU対戦</button><br>
        <button onclick="showOnlineMenu()">オンライン対戦</button><br>
        <button onclick="showSettings()">設定</button>
    </div>

    <div id="online-screen" class="screen hidden">
        <h2>オンライン対戦</h2>
        <button onclick="createRoom()">部屋を作成</button>
        <button onclick="joinRoom()">部屋に参加</button><br>
        <p id="room-code-display"></p>
        <div id="matching-msg"></div>
        <button onclick="backToMenu()">もどる</button>
    </div>

    <div id="settings-screen" class="screen hidden">
        <h2>設定</h2>
        <p>効果音: <button onclick="toggleSound()" id="sound-btn">ON</button></p>
        <p>テーマ色: <input type="color" id="color-picker" value="#27ae60" onchange="updateColor()"></p>
        <button onclick="backToMenu()">保存して戻る</button>
    </div>

    <div id="game-screen" class="screen hidden">
        <h3 id="game-info">あなたの番です</h3>
        <div class="board" id="board"></div>
        <p>黒: <span id="black-score">2</span> 白: <span id="white-score">2</span></p>
        <div id="game-over-menu" class="hidden">
            <h2 id="winner-msg"></h2>
            <button onclick="resetGame()">再度対戦</button>
            <button onclick="backToMenu()">メニューへ</button>
        </div>
    </div>

    <script>
        let myName = "";
        let soundOn = true;

        // 画面遷移
        function goToMenu() {
            const input = document.getElementById('nickname-input').value;
            if(input === "") return alert("名前を入力してね！");
            myName = input;
            document.getElementById('display-name').innerText = myName;
            showScreen('menu-screen');
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function backToMenu() { showScreen('menu-screen'); }
        function showSettings() { showScreen('settings-screen'); }
        function showOnlineMenu() { showScreen('online-screen'); }

        function toggleSound() {
            soundOn = !soundOn;
            document.getElementById('sound-btn').innerText = soundOn ? "ON" : "OFF";
        }

        function updateColor() {
            const color = document.getElementById('color-picker').value;
            document.documentElement.style.setProperty('--board-color', color);
        }

        // オンライン仮装ロジック
        function createRoom() {
            const code = Math.random().toString(36).substring(2, 7).toUpperCase();
            document.getElementById('room-code-display').innerText = "部屋コード: " + code;
            setTimeout(() => {
                document.getElementById('matching-msg').innerText = "マッチングしました！相手：ゲスト123";
            }, 3000);
        }

        // オセロ盤面生成（簡易版）
        function startCPU() {
            showScreen('game-screen');
            initBoard();
        }

        function initBoard() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = "";
            for(let i=0; i<64; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                const stone = document.createElement('div');
                stone.className = 'stone';
                // 初期配置
                if(i === 27 || i === 36) stone.classList.add('white');
                if(i === 28 || i === 35) stone.classList.add('black');
                cell.appendChild(stone);
                boardEl.appendChild(cell);
            }
        }
    </script>
</body>
</html>
