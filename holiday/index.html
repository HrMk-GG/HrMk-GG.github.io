<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>祝日爆破</title>
    <style>
        body {
            margin: 0; padding: 0;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
            background-color: #000;
            transition: background 0.5s;
        }

        #theme-selector {
            position: fixed; top: 20px; left: 20px; z-index: 1000;
        }

        .rainbow-text {
            background: linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbow-move 1s linear infinite;
            font-weight: 900;
            text-align: center;
        }

        #display-area {
            padding: 60px;
            border: 15px solid;
            border-image: linear-gradient(45deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000) 1;
            background: rgba(0, 0, 0, 0.9);
        }

        #days {
            font-size: 200px;
            display: block;
            line-height: 1;
        }

        @keyframes rainbow-move { to { background-position: 200% center; } }
        
        .vibe-low { animation: vibe 0.2s infinite; }
        .vibe-mid { animation: vibe 0.08s infinite; filter: contrast(150%); }
        .vibe-high { animation: vibe 0.02s infinite; filter: contrast(200%) hue-rotate(90deg); }

        @keyframes vibe {
            0% { transform: translate(0,0); }
            25% { transform: translate(8px, -8px); }
            50% { transform: translate(-8px, 8px); }
            75% { transform: translate(8px, 8px); }
            100% { transform: translate(0,0); }
        }

        body.basic { background: #008080 !important; }
        .basic .rainbow-text { -webkit-text-fill-color: #000; background: none; }
        .basic #display-area { background: #c0c0c0; border: 4px outset #fff; animation: none; }

        body.modern { background: #fff !important; }
        .modern .rainbow-text { -webkit-text-fill-color: #333; background: none; }
        .modern #display-area { background: #fff; border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.1); animation: none; border-radius: 20px; }
    </style>
</head>
<body class="rainbow">

    <select id="theme-selector" onchange="document.body.className = this.value">
        <option value="rainbow">rainbow</option>
        <option value="basic">basic</option>
        <option value="modern">modern</option>
    </select>

    <div id="display-area" class="vibe-low">
        <div id="holiday-name" class="rainbow-text" style="font-size: 40px; margin-bottom: 20px;">FETCHING...</div>
        <div class="rainbow-text" style="font-size: 60px;">
            あと <span id="days" class="rainbow-text">?</span> 日
        </div>
    </div>

    <script>
        async function getHoliday() {
            try {
                const res = await fetch('https://holidays-jp.github.io/api/v1/date.json');
                const data = await res.json();
                const now = new Date();
                const today = now.toISOString().split('T')[0];
                
                let nDate = null, nName = "";
                for (const [d, n] of Object.entries(data)) {
                    if (d > today) { nDate = new Date(d); nName = n; break; }
                }

                if (nDate) {
                    const diff = Math.ceil((nDate - now) / 86400000);
                    document.getElementById('holiday-name').innerText = nName;
                    document.getElementById('days').innerText = diff;

                    const area = document.getElementById('display-area');
                    if (diff <= 1) { area.className = "vibe-high"; document.body.style.background = "#f00"; }
                    else if (diff <= 3) { area.className = "vibe-mid"; document.body.style.background = "#400"; }
                }
            } catch (e) {
                document.getElementById('holiday-name').innerText = "ERROR";
            }
        }
        getHoliday();
    </script>
</body>
</html>
